{% extends 'base.html' %}

{% block content %}

<div class="container mt-4">

    <h3>Editar Registro (ID: {{ central.id }})</h3>
    <hr>

    <form method="POST">
        {% csrf_token %}
        {{ form.as_p }}

        <button class="btn btn-primary" type="submit">Guardar</button>
        <a href="{% url 'index' %}" class="btn btn-secondary">Cancelar</a>
    </form>

</div>

<script>
// ====== Multiplicación automática unidad * pack ======
document.addEventListener('DOMContentLoaded', function () {

    const cajas = document.querySelector('#id_cajas');
    const factorx = document.querySelector('#id_factorx');
    const stockFisico = document.querySelector('#id_stock_fisico');

    if (!cajas || !factorx || !stockFisico) return; // Evita errores si algún campo no existe

    const actualizarStock = () => {
        const c = parseFloat(cajas.value) || 0;
        const f = parseFloat(factorx.value) || 0;
        stockFisico.value = (c * f).toFixed(2);
    };

    cajas.addEventListener('input', actualizarStock);
    factorx.addEventListener('input', actualizarStock);

    // Calcular al cargar el formulario (útil en edición)
    actualizarStock();
});
</script>

{% endblock %}
